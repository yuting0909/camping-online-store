(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a4e7eb7e"],{"07ac":function(e,t,c){var l=c("23e7"),o=c("6f53").values;l({target:"Object",stat:!0},{values:function(e){return o(e)}})},"2e92":function(e,t,c){"use strict";c.r(t);c("a4d3"),c("e01a"),c("a434");var l=c("7a23"),o=Object(l["createElementVNode"])("div",{class:"loadingio-spinner-spin-xmpavumjb"},[Object(l["createElementVNode"])("div",{class:"ldio-ylwm2fadiqf"},[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div")]),Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div")]),Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div")]),Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div")]),Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div")]),Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div")]),Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div")]),Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div")])])],-1),n={class:"container mt-4"},r=Object(l["createElementVNode"])("h1",{class:"mb-4 fs-2 fw-bolder"},"編輯營區",-1),a={class:"row gx-5"},d=Object(l["createElementVNode"])("div",{class:"col-12"},[Object(l["createElementVNode"])("h2",{class:"fs-4 fw-bolder px-3 py-1 border-start border-primary border-4 rounded mb-3"}," 營區資訊 ")],-1),i={class:"col-12"},s={class:"mb-3"},m=Object(l["createElementVNode"])("label",{for:"title",class:"form-label"},"營區名稱",-1),b={class:"row gx-2"},u={class:"mb-3 col-md-3"},j=Object(l["createElementVNode"])("label",{for:"region",class:"form-label"},"地區",-1),p=Object(l["createElementVNode"])("option",null,"北部",-1),O=Object(l["createElementVNode"])("option",null,"中部",-1),f=Object(l["createElementVNode"])("option",null,"南部",-1),V=Object(l["createElementVNode"])("option",null,"東部",-1),E=Object(l["createElementVNode"])("option",null,"離島",-1),N=[p,O,f,V,E],v={class:"mb-3 col-md-3"},h=Object(l["createElementVNode"])("label",{for:"city",class:"form-label"},"縣市",-1),g={class:"mb-3 col-md-6"},y=Object(l["createElementVNode"])("label",{for:"address",class:"form-label"},"地址",-1),k={class:"mb-3"},x=Object(l["createElementVNode"])("div",{class:"mb-2"},"營區特色",-1),P={id:"features",class:"mb-3 card d-block p-3"},w=["id","value"],B=["for"],C={class:"mb-3"},T=Object(l["createElementVNode"])("label",{for:"description",class:"form-label"},"營區描述",-1),U={class:"mb-3"},D=Object(l["createElementVNode"])("label",{for:"content",class:"form-label"},"營區須知",-1),M={class:"mb-3"},F=Object(l["createElementVNode"])("label",{for:"notice",class:"form-label"},"注意事項",-1),L={class:"mb-3"},S={class:"form-check"},_=Object(l["createElementVNode"])("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),$=Object(l["createElementVNode"])("br",null,null,-1),I=Object(l["createElementVNode"])("div",{class:"col-12"},[Object(l["createElementVNode"])("h2",{class:"fs-4 fw-bolder px-3 py-1 border-start border-primary border-4 rounded mb-3"}," 營區照片 ")],-1),J={class:"col-12"},q=Object(l["createElementVNode"])("label",{class:"form-label"},"營區封面照片",-1),R={class:"d-flex"},z={class:"flex-fill mb-3 me-3"},A=Object(l["createElementVNode"])("div",{class:"d-flex align-items-center mb-3 me-3"},[Object(l["createElementVNode"])("span",null,"或上傳檔案")],-1),G={class:"flex-fill mb-3"},H={class:"mb-3"},K={class:"mb-3"},Q={class:"flex-fill mb-3 me-3"},W=["onUpdate:modelValue"],X=Object(l["createElementVNode"])("div",{class:"d-flex align-items-center mb-3 me-3"},[Object(l["createElementVNode"])("span",null,"或上傳檔案")],-1),Y={class:"flex-fill mb-3 me-2"},Z=["onChange"],ee={class:"mb-3"},te=["onClick"],ce={key:0,class:"mb-3"},le={class:"row image-wall"},oe={key:0,class:"col-sm-6 col-lg-3 mb-3"},ne=["src","alt"],re=["src","alt"],ae=Object(l["createElementVNode"])("br",null,null,-1),de={class:"col-12 d-flex mb-3"},ie=Object(l["createElementVNode"])("h2",{class:"fs-4 fw-bolder px-3 py-1 border-start border-primary border-4 rounded"}," 營地種類 ",-1),se={class:"ms-auto"},me={class:"col-12"},be={class:"mb-3"},ue={class:"row row-cols-1 row-cols-lg-3 g-4"},je={class:"card bg-light h-100"},pe=["src","alt"],Oe={class:"card-body"},fe={class:"card-title d-flex align-items-center justify-content-between"},Ve={class:"fs-5 m-0"},Ee={class:"text-end"},Ne={class:"card-text"},ve={key:0,class:"text-success"},he=Object(l["createElementVNode"])("i",{class:"bi bi-check-circle-fill"},null,-1),ge=Object(l["createTextVNode"])(" 已啟用"),ye=[he,ge],ke={key:1,class:"text-muted"},xe=Object(l["createElementVNode"])("i",{class:"bi bi-check-circle"},null,-1),Pe=Object(l["createTextVNode"])(" 未啟用"),we=[xe,Pe],Be={class:"card-footer bg-light border-0 p-0"},Ce={class:"btn-group w-100"},Te=["onClick"],Ue=["onClick"],De=Object(l["createElementVNode"])("br",null,null,-1),Me=Object(l["createElementVNode"])("hr",null,null,-1),Fe={class:"text-center my-5"};function Le(e,t,c,p,O,f){var V=Object(l["resolveComponent"])("Loading"),E=Object(l["resolveComponent"])("type-modal");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(V,{active:O.isLoading},{default:Object(l["withCtx"])((function(){return[o]})),_:1},8,["active"]),Object(l["createElementVNode"])("div",n,[r,Object(l["createElementVNode"])("div",a,[d,Object(l["createElementVNode"])("div",i,[Object(l["createElementVNode"])("div",s,[m,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{type:"text",class:"form-control",id:"title",placeholder:"請輸入營區名稱","onUpdate:modelValue":t[0]||(t[0]=function(e){return O.temProduct.title=e})},null,512),[[l["vModelText"],O.temProduct.title]])]),Object(l["createElementVNode"])("div",b,[Object(l["createElementVNode"])("div",u,[j,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{id:"region",class:"form-select","onUpdate:modelValue":t[1]||(t[1]=function(e){return O.temProduct.region=e}),onChange:t[2]||(t[2]=function(){return e.updateCities&&e.updateCities.apply(e,arguments)})},N,544),[[l["vModelSelect"],O.temProduct.region]])]),Object(l["createElementVNode"])("div",v,[h,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{id:"city",class:"form-select","onUpdate:modelValue":t[3]||(t[3]=function(e){return O.temProduct.city=e})},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(e.cities,(function(e){return Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e},Object(l["toDisplayString"])(e),1)})),128))],512),[[l["vModelSelect"],O.temProduct.city]])]),Object(l["createElementVNode"])("div",g,[y,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{type:"text",class:"form-control",id:"address",placeholder:"請輸入詳細地址","onUpdate:modelValue":t[4]||(t[4]=function(e){return O.temProduct.address=e})},null,512),[[l["vModelText"],O.temProduct.address]])])]),Object(l["createElementVNode"])("div",k,[x,Object(l["createElementVNode"])("div",P,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(e.features,(function(e){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:e},[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"form-check-input me-1",type:"checkbox",id:e,value:e,"onUpdate:modelValue":t[5]||(t[5]=function(e){return O.temProduct.features=e})},null,8,w),[[l["vModelCheckbox"],O.temProduct.features]]),Object(l["createElementVNode"])("label",{class:"form-check-label",for:e},Object(l["toDisplayString"])(e),9,B)])})),128))])]),Object(l["createElementVNode"])("div",C,[T,Object(l["withDirectives"])(Object(l["createElementVNode"])("textarea",{type:"text",class:"form-control",rows:"10",id:"description",placeholder:"請輸入營區描述","onUpdate:modelValue":t[6]||(t[6]=function(e){return O.temProduct.description=e})},null,512),[[l["vModelText"],O.temProduct.description]])]),Object(l["createElementVNode"])("div",U,[D,Object(l["withDirectives"])(Object(l["createElementVNode"])("textarea",{type:"text",class:"form-control",rows:"10",id:"content",placeholder:"請輸入營區營區須知","onUpdate:modelValue":t[7]||(t[7]=function(e){return O.temProduct.content=e})},null,512),[[l["vModelText"],O.temProduct.content]])]),Object(l["createElementVNode"])("div",M,[F,Object(l["withDirectives"])(Object(l["createElementVNode"])("textarea",{type:"text",class:"form-control",rows:"10",id:"notice",placeholder:"請輸入營區注意事項","onUpdate:modelValue":t[8]||(t[8]=function(e){return O.temProduct.notice=e})},null,512),[[l["vModelText"],O.temProduct.notice]])]),Object(l["createElementVNode"])("div",L,[Object(l["createElementVNode"])("div",S,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,id:"is_enabled","onUpdate:modelValue":t[9]||(t[9]=function(e){return O.temProduct.is_enabled=e})},null,512),[[l["vModelCheckbox"],O.temProduct.is_enabled]]),_])]),$]),I,Object(l["createElementVNode"])("div",J,[q,Object(l["createElementVNode"])("div",R,[Object(l["createElementVNode"])("div",z,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{type:"text",class:"form-control",id:"image","onUpdate:modelValue":t[10]||(t[10]=function(e){return O.temProduct.imageUrl=e}),placeholder:"請輸入圖片連結"},null,512),[[l["vModelText"],O.temProduct.imageUrl]])]),A,Object(l["createElementVNode"])("div",G,[Object(l["createElementVNode"])("input",{type:"file",id:"imageFile",class:"form-control",ref:"fileInput",onChange:t[11]||(t[11]=function(){return e.uploadFile&&e.uploadFile.apply(e,arguments)})},null,544)])]),Object(l["createElementVNode"])("div",H,[Object(l["createElementVNode"])("div",K,[Object(l["createElementVNode"])("button",{class:"btn btn-outline-primary btn-sm d-block",onClick:t[12]||(t[12]=function(e){return O.temProduct.images.push("")})}," 新增更多照片 ")]),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(O.temProduct.images,(function(t,c){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{class:"d-flex",key:c},[Object(l["createElementVNode"])("div",Q,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{type:"url",class:"form-control form-control","onUpdate:modelValue":function(e){return O.temProduct.images[c]=e},placeholder:"請輸入連結"},null,8,W),[[l["vModelText"],O.temProduct.images[c]]])]),X,Object(l["createElementVNode"])("div",Y,[Object(l["createElementVNode"])("input",{type:"file",class:"form-control",ref:e.setItemRef,onChange:function(t){return e.uploadMoreFiles(c)}},null,40,Z)]),Object(l["createElementVNode"])("div",ee,[Object(l["createElementVNode"])("button",{class:"btn btn-outline-danger",type:"button",onClick:function(e){return O.temProduct.images.splice(c,1)}}," 移除 ",8,te)])])})),128))]),O.temProduct.imageUrl||O.temProduct.images?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ce,[Object(l["createElementVNode"])("div",le,[O.temProduct.imageUrl?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",oe,[Object(l["createElementVNode"])("img",{class:"product-image",src:O.temProduct.imageUrl,alt:O.temProduct.title},null,8,ne)])):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(O.temProduct.images,(function(e,t){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{class:"col-sm-6 col-lg-3 mb-3",key:t},[Object(l["createElementVNode"])("img",{class:"product-image",src:O.temProduct.images[t],alt:O.temProduct.title},null,8,re)])})),128))])])):Object(l["createCommentVNode"])("",!0),ae]),Object(l["createElementVNode"])("div",de,[ie,Object(l["createElementVNode"])("div",se,[Object(l["createElementVNode"])("button",{class:"btn btn-primary",type:"button",onClick:t[13]||(t[13]=function(t){return e.openModal(!0)})}," 新增種類 ")])]),Object(l["createElementVNode"])("div",me,[Object(l["createElementVNode"])("div",be,[Object(l["createElementVNode"])("div",ue,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(e.temTypes,(function(t){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{class:"col",key:t.title},[Object(l["createElementVNode"])("div",je,[t.images&&t.images[0]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",{key:0,class:"type-image",src:t.images[0],alt:t},null,8,pe)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Oe,[Object(l["createElementVNode"])("div",fe,[Object(l["createElementVNode"])("h3",Ve,Object(l["toDisplayString"])(t.title),1),Object(l["createElementVNode"])("small",Ee,"NT$"+Object(l["toDisplayString"])(t.price)+" / "+Object(l["toDisplayString"])(t.unit),1)]),Object(l["createElementVNode"])("div",Ne,[Object(l["createElementVNode"])("p",null,Object(l["toDisplayString"])(t.content),1),t.is_enabled?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ve,ye)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ke,we))])]),Object(l["createElementVNode"])("div",Be,[Object(l["createElementVNode"])("div",Ce,[Object(l["createElementVNode"])("button",{type:"button",class:"btn btn-outline-success w-50 btn-left",onClick:function(c){return e.openModal(!1,t)}}," 編輯 ",8,Te),Object(l["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger w-50 btn-right",onClick:function(c){return e.deleteTemType(t)}}," 刪除 ",8,Ue)])])])])})),128))]),De]),Me,Object(l["createElementVNode"])("div",Fe,[Object(l["createElementVNode"])("button",{class:"btn btn-outline-secondary px-5 me-3",type:"button",onClick:t[14]||(t[14]=function(){return e.cancel&&e.cancel.apply(e,arguments)})}," 取消 "),Object(l["createElementVNode"])("button",{class:"btn btn-primary px-5",type:"button",onClick:t[15]||(t[15]=function(){return f.updateProduct&&f.updateProduct.apply(f,arguments)})}," 確認 ")])])])]),Object(l["createVNode"])(E,{ref:"typeModal",type:e.temType,onUpdateType:e.updateTemType},null,8,["type","onUpdateType"])],64)}var Se=c("5530"),_e=(c("d81d"),c("99af"),c("07ac"),c("4de4"),c("d3b7"),c("3ca3"),c("ddb0"),c("1bf9")),$e=c("1329"),Ie={data:function(){return{temProduct:{},id:"",isLoading:!1}},watch:{temProduct:{handler:function(){var e=this;this.temTypes.length&&this.temTypes.map((function(t){t.belong_to=e.temProduct.title}))},deep:!0}},mixins:[_e["a"],$e["a"]],created:function(){this.id=this.$route.params.productId,this.getProduct()},methods:{getProduct:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("icamping","/admin/products/all");this.isLoading=!0,this.$http.get(t).then((function(t){e.isLoading=!1;var c=t.data.products[e.id];e.temProduct=c.features?c:Object(Se["a"])(Object(Se["a"])({},c),{},{features:[]}),e.getTypes()}))},getTypes:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("icamping","/admin/products/all");this.$http.get(t).then((function(t){var c=Object.values(t.data.products);e.types=c.filter((function(t){return t.belong_to===e.temProduct.title})),e.temTypes=c.filter((function(t){return t.belong_to===e.temProduct.title}))}))},updateProduct:function(){var e=this,t=this.temTypes.map((function(t){return e.createPromise(t)})),c=this.types.map((function(t){return e.deletePromise(t)}));this.updatePromise(this.temProduct).then((function(t){return e.pushMessageState(t,"營區更新"),Promise.all(c)})).then((function(e){return Promise.all(t)})).then((function(t){return e.$router.push("/admin/products")}))}}};Ie.render=Le;t["default"]=Ie},"6f53":function(e,t,c){var l=c("83ab"),o=c("df75"),n=c("fc6a"),r=c("d1e7").f,a=function(e){return function(t){var c,a=n(t),d=o(a),i=d.length,s=0,m=[];while(i>s)c=d[s++],l&&!r.call(a,c)||m.push(e?[c,a[c]]:a[c]);return m}};e.exports={entries:a(!0),values:a(!1)}}}]);
//# sourceMappingURL=chunk-a4e7eb7e.491ac751.js.map