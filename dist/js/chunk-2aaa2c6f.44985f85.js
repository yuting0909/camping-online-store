(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2aaa2c6f"],{"159b":function(e,t,c){var r=c("da84"),n=c("fdbc"),o=c("17c2"),a=c("9112");for(var i in n){var l=r[i],s=l&&l.prototype;if(s&&s.forEach!==o)try{a(s,"forEach",o)}catch(d){s.forEach=o}}},1799:function(e,t,c){"use strict";var r=c("7a23"),n={"aria-label":"Page navigation example"},o={class:"pagination justify-content-center"},a=Object(r["createElementVNode"])("span",{"aria-hidden":"true"},"«",-1),i=[a],l=["onClick"],s=Object(r["createElementVNode"])("span",{"aria-hidden":"true"},"»",-1),d=[s];function u(e,t,c,a,s,u){return Object(r["openBlock"])(),Object(r["createElementBlock"])("nav",n,[Object(r["createElementVNode"])("ul",o,[Object(r["createElementVNode"])("li",{class:Object(r["normalizeClass"])(["page-item",{disabled:1===c.pages.current_page}])},[Object(r["createElementVNode"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=Object(r["withModifiers"])((function(t){return e.$emit("update-page",c.pages.current_page-1)}),["prevent"]))},i)],2),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(c.pages.total_pages,(function(t){return Object(r["openBlock"])(),Object(r["createElementBlock"])("li",{class:Object(r["normalizeClass"])(["page-item",{active:t===c.pages.current_page}]),key:t},[Object(r["createElementVNode"])("a",{class:"page-link",href:"#",onClick:Object(r["withModifiers"])((function(c){return e.$emit("update-page",t)}),["prevent"])},Object(r["toDisplayString"])(t),9,l)],2)})),128)),Object(r["createElementVNode"])("li",{class:Object(r["normalizeClass"])(["page-item",{disabled:c.pages.current_page===c.pages.total_pages}])},[Object(r["createElementVNode"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=Object(r["withModifiers"])((function(t){return e.$emit("update-page",c.pages.current_page+1)}),["prevent"]))},d)],2)])])}var p={props:["pages"]};p.render=u;t["a"]=p},"17c2":function(e,t,c){"use strict";var r=c("b727").forEach,n=c("a640"),o=n("forEach");e.exports=o?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},2532:function(e,t,c){"use strict";var r=c("23e7"),n=c("5a34"),o=c("1d80"),a=c("577e"),i=c("ab13");r({target:"String",proto:!0,forced:!i("includes")},{includes:function(e){return!!~a(o(this)).indexOf(a(n(e)),arguments.length>1?arguments[1]:void 0)}})},2771:function(e,t,c){"use strict";c("d532")},"466d":function(e,t,c){"use strict";var r=c("d784"),n=c("825a"),o=c("50c4"),a=c("577e"),i=c("1d80"),l=c("8aa5"),s=c("14c3");r("match",(function(e,t,c){return[function(t){var c=i(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,c):new RegExp(t)[e](a(c))},function(e){var r=n(this),i=a(e),d=c(t,r,i);if(d.done)return d.value;if(!r.global)return s(r,i);var u=r.unicode;r.lastIndex=0;var p,b=[],f=0;while(null!==(p=s(r,i))){var m=a(p[0]);b[f]=m,""===m&&(r.lastIndex=l(i,o(r.lastIndex),u)),f++}return 0===f?null:b}]}))},"5a34":function(e,t,c){var r=c("44e7");e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},"6f93":function(e,t,c){"use strict";c("76e8")},"76e8":function(e,t,c){},"84af":function(e,t,c){"use strict";var r=c("7a23");Object(r["pushScopeId"])("data-v-a0587792");var n={class:"text-white ps-4 py-2 pe-1 lh-base s1-animate"};function o(e,t,c,o,a,i){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:"banner",style:Object(r["normalizeStyle"])({backgroundImage:"url(".concat(c.imgUrl,")")})},[Object(r["createElementVNode"])("h1",n,Object(r["toDisplayString"])(c.title),1)],4)}Object(r["popScopeId"])();var a={props:["title","imgUrl"]};c("2771");a.render=o,a.__scopeId="data-v-a0587792";t["a"]=a},a434:function(e,t,c){"use strict";var r=c("23e7"),n=c("23cb"),o=c("a691"),a=c("50c4"),i=c("7b0b"),l=c("65f0"),s=c("8418"),d=c("1dde"),u=d("splice"),p=Math.max,b=Math.min,f=9007199254740991,m="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var c,r,d,u,g,h,v=i(this),O=a(v.length),j=n(e,O),E=arguments.length;if(0===E?c=r=0:1===E?(c=0,r=O-j):(c=E-2,r=b(p(o(t),0),O-j)),O+c-r>f)throw TypeError(m);for(d=l(v,r),u=0;u<r;u++)g=j+u,g in v&&s(d,u,v[g]);if(d.length=r,c<r){for(u=j;u<O-r;u++)g=u+r,h=u+c,g in v?v[h]=v[g]:delete v[h];for(u=O;u>O-r+c;u--)delete v[u-1]}else if(c>r)for(u=O-r;u>j;u--)g=u+r-1,h=u+c-1,g in v?v[h]=v[g]:delete v[h];for(u=0;u<c;u++)v[u+j]=arguments[u+2];return v.length=O-r+c,d}})},a640:function(e,t,c){"use strict";var r=c("d039");e.exports=function(e,t){var c=[][e];return!!c&&r((function(){c.call(null,t||function(){throw 1},1)}))}},ab13:function(e,t,c){var r=c("b622"),n=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(c){try{return t[n]=!1,"/./"[e](t)}catch(r){}}return!1}},c740:function(e,t,c){"use strict";var r=c("23e7"),n=c("b727").findIndex,o=c("44d2"),a="findIndex",i=!0;a in[]&&Array(1)[a]((function(){i=!1})),r({target:"Array",proto:!0,forced:i},{findIndex:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),o(a)},c749:function(e,t,c){"use strict";c("d4ea")},caad:function(e,t,c){"use strict";var r=c("23e7"),n=c("4d64").includes,o=c("44d2");r({target:"Array",proto:!0},{includes:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},d4ea:function(e,t,c){},d532:function(e,t,c){},e6dc:function(e,t,c){"use strict";c.r(t);var r=c("7a23");Object(r["pushScopeId"])("data-v-3d233de1");var n={id:"user-products"},o=Object(r["createElementVNode"])("div",{class:"loadingio-spinner-spin-xmpavumjb"},[Object(r["createElementVNode"])("div",{class:"ldio-ylwm2fadiqf"},[Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("div")]),Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("div")]),Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("div")]),Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("div")]),Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("div")]),Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("div")]),Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("div")]),Object(r["createElementVNode"])("div",null,[Object(r["createElementVNode"])("div")])])],-1),a={class:"products-section-1"},i={class:"products-section-2"},l={class:"container pt-3 pt-md-5"},s={class:"row"},d={class:"col-lg-4 col-xl-3 d-none d-lg-block"},u={class:"card rounded-4"},p={class:"card-body py-4"},b={class:"regions pb-4 mb-4 border-bottom"},f=Object(r["createElementVNode"])("h2",{class:"fs-4 mb-3"}," 目的地 ",-1),m=["id","value"],g=["for"],h={class:"features"},v=Object(r["createElementVNode"])("h2",{class:"fs-4 mb-3"},"營區特色",-1),O=["id","value"],j=["for"],E={class:"col d-lg-none mb-3"},N=Object(r["createElementVNode"])("button",{class:"btn btn-primary w-100 w-sm-fit",type:"button","data-bs-toggle":"collapse","data-bs-target":"#categoryFilter","aria-expanded":"false","aria-controls":"categoryFilter"},[Object(r["createTextVNode"])(" 條件篩選"),Object(r["createElementVNode"])("i",{class:"bi bi-search ms-2"})],-1),V={class:"collapse mt-3",id:"categoryFilter"},k={class:"card bg-light p-2 rounded-0 border-0"},y={class:"row g-1 regions mb-2"},x=Object(r["createElementVNode"])("div",{class:"d-none d-sm-block col-sm-2 pt-2"},[Object(r["createElementVNode"])("h2",{class:"fs-7"},[Object(r["createTextVNode"])(" 目的地 "),Object(r["createElementVNode"])("i",{class:"bi bi-caret-right-fill"})])],-1),w={class:"col region-tags"},B=["id","value"],F=["for"],S={class:"row g-1 features"},C=Object(r["createElementVNode"])("div",{class:"d-none d-sm-block col-sm-2 pt-2"},[Object(r["createElementVNode"])("h2",{class:"fs-7"},[Object(r["createTextVNode"])(" 營區特色 "),Object(r["createElementVNode"])("i",{class:"bi bi-caret-right-fill"})])],-1),P={class:"col region-tags"},_=["id","value"],I=["for"],U={class:"col-lg-8 col-xl-9"},D={class:"row mb-3"},M={class:"col"},L={class:"input-group"},R=Object(r["createElementVNode"])("span",{class:"input-group-text bg-primary text-light"},"搜尋營區",-1),$={key:0,class:"row mb-3"},A={key:1,class:"pt-3"},T=Object(r["createElementVNode"])("h3",{class:"fs-5 fw-bold"},"沒有符合條件的營地喔",-1),z=[T];function J(e,t,c,T,J,q){var G=Object(r["resolveComponent"])("Loading"),H=Object(r["resolveComponent"])("Banner"),K=Object(r["resolveComponent"])("product-card"),Q=Object(r["resolveComponent"])("Pagination");return Object(r["openBlock"])(),Object(r["createElementBlock"])("main",n,[Object(r["createVNode"])(G,{active:J.isLoading},{default:Object(r["withCtx"])((function(){return[o]})),_:1},8,["active"]),Object(r["createElementVNode"])("section",a,[Object(r["createVNode"])(H,{title:J.title,imgUrl:J.publicPath+J.imgUrl},null,8,["title","imgUrl"])]),Object(r["createElementVNode"])("section",i,[Object(r["createElementVNode"])("div",l,[Object(r["createElementVNode"])("div",s,[Object(r["createElementVNode"])("div",d,[Object(r["createElementVNode"])("div",u,[Object(r["createElementVNode"])("div",p,[Object(r["createElementVNode"])("div",b,[f,(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(J.regions,(function(e,c){return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:c},[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"checkbox",class:"btn-check",id:e,value:e,autocomplete:"off","onUpdate:modelValue":t[0]||(t[0]=function(e){return J.filterRegions=e})},null,8,m),[[r["vModelCheckbox"],J.filterRegions]]),Object(r["createElementVNode"])("label",{class:"btn btn-outline-secondary btn-hover-white rounded-pill fs-7 py-1 px-3 my-1 me-2",for:e},"# "+Object(r["toDisplayString"])(e),9,g)],64)})),128))]),Object(r["createElementVNode"])("div",h,[v,(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(J.features,(function(e,c){return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:c},[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"checkbox",class:"btn-check",id:e,value:e,autocomplete:"off","onUpdate:modelValue":t[1]||(t[1]=function(e){return J.filterFeatures=e})},null,8,O),[[r["vModelCheckbox"],J.filterFeatures]]),Object(r["createElementVNode"])("label",{class:"btn btn-outline-secondary btn-hover-white rounded-pill fs-7 py-1 px-3 my-1 me-2",for:e},"# "+Object(r["toDisplayString"])(e),9,j)],64)})),128))])])])]),Object(r["createElementVNode"])("div",E,[N,Object(r["createElementVNode"])("div",V,[Object(r["createElementVNode"])("div",k,[Object(r["createElementVNode"])("div",y,[x,Object(r["createElementVNode"])("div",w,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(J.regions,(function(e,c){return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:c},[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"checkbox",class:"btn-check",id:e,value:e,autocomplete:"off","onUpdate:modelValue":t[2]||(t[2]=function(e){return J.filterRegions=e})},null,8,B),[[r["vModelCheckbox"],J.filterRegions]]),Object(r["createElementVNode"])("label",{class:"btn btn-outline-secondary btn-hover-white rounded-pill fs-7 py-1 px-3 my-1 me-2",for:e},"# "+Object(r["toDisplayString"])(e),9,F)],64)})),128))])]),Object(r["createElementVNode"])("div",S,[C,Object(r["createElementVNode"])("div",P,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(J.features,(function(e,c){return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:c},[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"checkbox",class:"btn-check",id:e,value:e,autocomplete:"off","onUpdate:modelValue":t[3]||(t[3]=function(e){return J.filterFeatures=e})},null,8,_),[[r["vModelCheckbox"],J.filterFeatures]]),Object(r["createElementVNode"])("label",{class:"btn btn-outline-secondary btn-hover-white rounded-pill fs-7 py-1 px-3 my-1 me-2",for:e},"# "+Object(r["toDisplayString"])(e),9,I)],64)})),128))])])])])]),Object(r["createElementVNode"])("div",U,[Object(r["createElementVNode"])("div",D,[Object(r["createElementVNode"])("div",M,[Object(r["createElementVNode"])("form",null,[Object(r["createElementVNode"])("div",L,[R,Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"請輸入營區名稱","onUpdate:modelValue":t[4]||(t[4]=function(e){return J.keyword=e})},null,512),[[r["vModelText"],J.keyword]])])])])]),J.products.length?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",$,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(J.products,(function(e,t){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:"col-sm-6 col-lg-6 col-xl-4 mb-3",key:t},[Object(r["createVNode"])(K,{product:e,onUpdateFavorite:q.updateFavorite},null,8,["product","onUpdateFavorite"])])})),128))])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",A,z)),Object(r["createVNode"])(Q,{pages:J.pagination,onUpdatePage:q.getProducts},null,8,["pages","onUpdatePage"])])])])])])}Object(r["popScopeId"])();c("99af"),c("4de4"),c("fb6a"),c("159b"),c("caad"),c("2532"),c("ac1f"),c("466d");var q=c("84af"),G=c("e915"),H=c("1799"),K={components:{Banner:q["a"],ProductCard:G["a"],Pagination:H["a"]},data:function(){return{publicPath:"/icamping/",title:"尋找營區",imgUrl:"images/products/products-01.jpg",regions:["北部","中部","南部","東部","離島"],features:["免裝備","裝備租借","雨棚","遊戲設施","玩水","高海拔","森林","草原","靠海","近溪流","夜景","雲海"],keyword:"",filterRegions:[],filterFeatures:[],products:[],isLoading:!1,pagination:{current_page:1,offset:9,total_pages:0,page_start:0}}},inject:["emitter"],watch:{keyword:function(){this.getProducts()},filterRegions:function(){this.getProducts()},filterFeatures:function(){this.getProducts()}},methods:{getProducts:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("icamping","/products/all");this.isLoading=!0,this.$http.get(c).then((function(c){e.products=c.data.products.filter((function(e){return"露營區"===e.category})),e.filterProducts(),e.createPagination(t),e.isLoading=!1}))},createPagination:function(e){this.pagination.current_page=e,this.pagination.page_start=(this.pagination.current_page-1)*this.pagination.offset,this.pagination.total_pages=Math.ceil(this.products.length/this.pagination.offset),this.products=this.products.slice(this.pagination.page_start,this.pagination.page_start+this.pagination.offset)},filterProducts:function(){var e=this;if(this.filterRegions.length){var t=[];this.filterRegions.forEach((function(c){e.products.forEach((function(e){e.region===c&&t.push(e)}))})),this.products=t}this.filterFeatures.length&&this.filterFeatures.forEach((function(t){e.products=e.products.filter((function(e){return e.features.includes(t)}))})),this.keyword&&(this.products=this.products.filter((function(t){return t.title.match(e.keyword)}))),this.productsNum=this.products.length},updateFavorite:function(e){e?this.emitter.emit("send-message",{success:!0,content:"已加入收藏!"}):this.emitter.emit("send-message",{success:!1,content:"已從收藏中移除!"})}},created:function(){this.$route.query.feature&&this.filterFeatures.push(this.$route.query.feature),this.$route.query.region&&this.filterRegions.push(this.$route.query.region),this.getProducts()}};c("6f93");K.render=J,K.__scopeId="data-v-3d233de1";t["default"]=K},e915:function(e,t,c){"use strict";var r=c("7a23");Object(r["pushScopeId"])("data-v-ae38403c");var n={class:"card border-0 text-decoration-none text-reset h-100 shadow"},o=Object(r["createElementVNode"])("path",{d:"M4 1c2.21 0 4 1.755 4 3.92C8 2.755 9.79 1 12 1s4 1.755 4 3.92c0 3.263-3.234 4.414-7.608 9.608a.513.513 0 0 1-.784 0C3.234 9.334 0 8.183 0 4.92 0 2.755 1.79 1 4 1z"},null,-1),a=[o],i=["src","alt"],l={class:"card-body d-flex flex-nowrap px-2 py-3"},s={class:"card-title fw-bold text-hidden"},d={class:"card-price fs-7 text-warning ms-auto w-50 w-lg-auto text-end"};function u(e,t,c,o,u,p){var b=Object(r["resolveComponent"])("router-link");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",n,[c.favoriteShow?(Object(r["openBlock"])(),Object(r["createElementBlock"])("button",{key:0,type:"button",class:"btn favorite-icon position-absolute px-2 py-1 mb-2",onClick:t[0]||(t[0]=function(e){return p.updateFavorite(c.product.id)})},[(Object(r["openBlock"])(),Object(r["createElementBlock"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",class:Object(r["normalizeClass"])(["bi bi-suit-heart-fill",{active:u.isFavorite}]),viewBox:"0 0 16 16"},a,2))])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(b,{class:"stretched-link",to:"/products/".concat(c.product.id)},null,8,["to"]),Object(r["createElementVNode"])("img",{src:c.product.imageUrl,class:"card-img-top product-img",alt:c.product.title},null,8,i),Object(r["createElementVNode"])("div",l,[Object(r["createElementVNode"])("div",s,Object(r["toDisplayString"])(c.product.city)+" | "+Object(r["toDisplayString"])(c.product.title),1),Object(r["createElementVNode"])("div",d," NT "+Object(r["toDisplayString"])(e.$filters.currency(c.product.price))+" 起 ",1)])])}Object(r["popScopeId"])();c("c740"),c("a434");var p={data:function(){return{isFavorite:!1}},props:{product:Object,favoriteShow:{type:Boolean,default:!0}},methods:{updateFavorite:function(e){this.isFavorite=!this.isFavorite;var t=JSON.parse(localStorage.getItem("favoriteProducts"))||[];if(t.some((function(t){return t.id===e}))){var c=t.findIndex((function(t){return t.id===e}));t.splice(c,1)}else t.push(this.product);localStorage.setItem("favoriteProducts",JSON.stringify(t)),this.$emit("update-favorite",this.isFavorite)}},mounted:function(){var e=this,t=JSON.parse(localStorage.getItem("favoriteProducts"))||[];t.length&&(this.isFavorite=t.some((function(t){return t.id===e.product.id})))},updated:function(){var e=this,t=JSON.parse(localStorage.getItem("favoriteProducts"))||[];t.length&&(this.isFavorite=t.some((function(t){return t.id===e.product.id})))}};c("c749");p.render=u,p.__scopeId="data-v-ae38403c";t["a"]=p},fb6a:function(e,t,c){"use strict";var r=c("23e7"),n=c("861d"),o=c("e8b5"),a=c("23cb"),i=c("50c4"),l=c("fc6a"),s=c("8418"),d=c("b622"),u=c("1dde"),p=u("slice"),b=d("species"),f=[].slice,m=Math.max;r({target:"Array",proto:!0,forced:!p},{slice:function(e,t){var c,r,d,u=l(this),p=i(u.length),g=a(e,p),h=a(void 0===t?p:t,p);if(o(u)&&(c=u.constructor,"function"!=typeof c||c!==Array&&!o(c.prototype)?n(c)&&(c=c[b],null===c&&(c=void 0)):c=void 0,c===Array||void 0===c))return f.call(u,g,h);for(r=new(void 0===c?Array:c)(m(h-g,0)),d=0;g<h;g++,d++)g in u&&s(r,d,u[g]);return r.length=d,r}})}}]);
//# sourceMappingURL=chunk-2aaa2c6f.44985f85.js.map