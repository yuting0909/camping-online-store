(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6842a9a5"],{2771:function(e,t,c){"use strict";c("d532")},"84af":function(e,t,c){"use strict";var a=c("7a23");Object(a["pushScopeId"])("data-v-a0587792");var n={class:"text-white ps-4 py-2 pe-1 lh-base s1-animate"};function o(e,t,c,o,l,r){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"banner",style:Object(a["normalizeStyle"])({backgroundImage:"url(".concat(c.imgUrl,")")})},[Object(a["createElementVNode"])("h1",n,Object(a["toDisplayString"])(c.title),1)],4)}Object(a["popScopeId"])();var l={props:["title","imgUrl"]};c("2771");l.render=o,l.__scopeId="data-v-a0587792";t["a"]=l},"8b35":function(e,t,c){},b789:function(e,t,c){"use strict";c.r(t);var a=c("7a23");Object(a["pushScopeId"])("data-v-7bde633b");var n={id:"user-cart"},o=Object(a["createElementVNode"])("div",{class:"loadingio-spinner-spin-xmpavumjb"},[Object(a["createElementVNode"])("div",{class:"ldio-ylwm2fadiqf"},[Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div")]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div")]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div")]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div")]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div")]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div")]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div")]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div")])])],-1),l={class:"cart-section-1"},r={class:"cart-section-2"},d={key:0,class:"container py-5"},s={class:"table-responsive"},i={class:"table border-light"},b=Object(a["createElementVNode"])("thead",{class:"bg-info text-white"},[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("th",{width:"360",class:"ps-3 border-0"}," 商品名稱 "),Object(a["createElementVNode"])("th",{width:"180",class:"d-none d-sm-table-cell text-center border-0"}," 單價 "),Object(a["createElementVNode"])("th",{width:"200",class:"text-center border-0"},[Object(a["createTextVNode"])(" 數量 "),Object(a["createElementVNode"])("span",{class:"d-sm-none"}," & 金額")]),Object(a["createElementVNode"])("th",{width:"120",class:"text-center border-0 d-none d-sm-table-cell"}," 金額 "),Object(a["createElementVNode"])("th",{width:"120",class:"text-center border-0"},"刪除")])],-1),m={class:"border-light"},u={class:"row"},p={class:"col-lg-5 d-none d-lg-block"},j=["src"],O={class:"col-lg-7"},h=Object(a["createElementVNode"])("br",null,null,-1),v={class:"text-center align-middle border-light d-none d-sm-table-cell"},V={class:"text-center align-middle border-light"},N={class:"input-quantity d-flex justify-content-center border m-0"},E=["onClick"],g=Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-dash text-muted",viewBox:"0 0 16 16"},[Object(a["createElementVNode"])("path",{d:"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"})],-1),f=[g],y=["onUpdate:modelValue"],x=["onClick"],w=Object(a["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-plus text-muted",viewBox:"0 0 16 16"},[Object(a["createElementVNode"])("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})],-1),C=[w],k={class:"d-block d-sm-none mt-2"},B={class:"text-center align-middle border-light d-none d-sm-table-cell"},S={class:"text-center align-middle border-light"},_=["onClick"],$=Object(a["createElementVNode"])("i",{class:"bi bi-trash"},null,-1),D=[$],I={class:"d-sm-none"},U=Object(a["createElementVNode"])("td",{colspan:"2",class:"text-end"},"小計",-1),q={class:"text-end"},T={key:0,class:"d-sm-none"},L=Object(a["createElementVNode"])("td",{colspan:"2",class:"text-end text-success"},"折扣",-1),M={class:"text-end text-success"},Q={class:"d-none d-sm-table-row"},z=Object(a["createElementVNode"])("td",{colspan:"4",class:"text-end"},"小計",-1),A={class:"text-end"},J={key:1,class:"d-none d-sm-table-row"},P=Object(a["createElementVNode"])("td",{colspan:"4",class:"text-end text-success"},"折扣",-1),F={class:"text-end text-success"},G={class:"row justify-content-end"},H={class:"col-sm-8 col-lg-6"},K={class:"input-group mb-3 input-group-sm"},R={class:"input-group-append"},W={class:"mb-3 text-end"},X=Object(a["createTextVNode"])(" 總金額： "),Y={class:"text-warning fs-5 fw-bold"},Z=Object(a["createStaticVNode"])('<div class="row" data-v-7bde633b><div class="col-sm-5" data-v-7bde633b><a href="#/products" class="w-100 mb-3 btn btn-outline-success rounded-0 px-3" data-v-7bde633b><i class="bi bi-caret-left-fill" data-v-7bde633b></i> 繼續購物 </a></div><div class="col-sm-2" data-v-7bde633b></div><div class="col-sm-5" data-v-7bde633b><a href="#/order" class="w-100 mb-3 btn btn-success text-white rounded-0 px-3" data-v-7bde633b>前往結帳 <i class="bi bi-caret-right-fill" data-v-7bde633b></i></a></div></div>',1),ee={key:1,class:"container py-5"},te=Object(a["createElementVNode"])("h2",{class:"fw-bold mb-3"},"目前還沒有加入商品喔",-1),ce=Object(a["createElementVNode"])("a",{href:"#/products",class:"btn btn-primary"},[Object(a["createTextVNode"])("尋找喜歡的露營區 "),Object(a["createElementVNode"])("i",{class:"bi bi-caret-right-fill"})],-1),ae=[te,ce];function ne(e,t,c,g,w,$){var te=Object(a["resolveComponent"])("Loading"),ce=Object(a["resolveComponent"])("Banner");return Object(a["openBlock"])(),Object(a["createElementBlock"])("main",n,[Object(a["createVNode"])(te,{active:w.isLoading},{default:Object(a["withCtx"])((function(){return[o]})),_:1},8,["active"]),Object(a["createElementVNode"])("section",l,[Object(a["createVNode"])(ce,{title:w.title,imgUrl:w.publicPath+w.imgUrl},null,8,["title","imgUrl"])]),Object(a["createElementVNode"])("section",r,[w.cart.total?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",d,[Object(a["createElementVNode"])("div",s,[Object(a["createElementVNode"])("table",i,[b,Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(w.cart.carts,(function(t,c){return Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:c},[Object(a["createElementVNode"])("td",m,[Object(a["createElementVNode"])("div",u,[Object(a["createElementVNode"])("div",p,[Object(a["createElementVNode"])("img",{class:"cart-img",src:t.product.images[0],alt:"產品圖片"},null,8,j)]),Object(a["createElementVNode"])("div",O,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.product.belong_to)+" ",1),h,Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(t.product.title),1)])])]),Object(a["createElementVNode"])("td",v," $ "+Object(a["toDisplayString"])(e.$filters.currency(t.product.price)),1),Object(a["createElementVNode"])("td",V,[Object(a["createElementVNode"])("div",N,[Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-sm rounded-0",onClick:function(e){return $.decreaseQty(t)}},f,8,E),Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{class:"w-50 text-center border-0 border-start border-end",type:"text","onUpdate:modelValue":function(e){return t.qty=e}},null,8,y),[[a["vModelText"],t.qty]]),Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-sm rounded-0",onClick:function(e){return $.increaseQty(t)}},C,8,x)]),Object(a["createElementVNode"])("span",k,"$ "+Object(a["toDisplayString"])(e.$filters.currency(t.total)),1)]),Object(a["createElementVNode"])("td",B," $ "+Object(a["toDisplayString"])(e.$filters.currency(t.total)),1),Object(a["createElementVNode"])("td",S,[Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-sm btn-outline-danger fs-5 btn-hover-white",onClick:function(e){return $.removeCartItem(t)}},D,8,_)])])})),128))]),Object(a["createElementVNode"])("tfoot",null,[Object(a["createElementVNode"])("tr",I,[U,Object(a["createElementVNode"])("td",q,Object(a["toDisplayString"])(e.$filters.currency(w.cart.total)),1)]),w.cart.final_total!==w.cart.total?(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",T,[L,Object(a["createElementVNode"])("td",M," - "+Object(a["toDisplayString"])(e.$filters.currency(w.cart.total-w.cart.final_total)),1)])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("tr",Q,[z,Object(a["createElementVNode"])("td",A,Object(a["toDisplayString"])(e.$filters.currency(w.cart.total)),1)]),w.cart.final_total!==w.cart.total?(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",J,[P,Object(a["createElementVNode"])("td",F," - "+Object(a["toDisplayString"])(e.$filters.currency(w.cart.total-w.cart.final_total)),1)])):Object(a["createCommentVNode"])("",!0)])])]),Object(a["createElementVNode"])("div",G,[Object(a["createElementVNode"])("div",H,[Object(a["createElementVNode"])("div",K,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control rounded-0","onUpdate:modelValue":t[0]||(t[0]=function(e){return w.coupon_code=e}),placeholder:"請輸入優惠碼"},null,512),[[a["vModelText"],w.coupon_code]]),Object(a["createElementVNode"])("div",R,[Object(a["createElementVNode"])("button",{class:"btn btn-outline-info rounded-0",type:"button",onClick:t[1]||(t[1]=function(){return $.addCouponCode&&$.addCouponCode.apply($,arguments)})}," 套用優惠碼 ")])]),Object(a["createElementVNode"])("div",W,[X,Object(a["createElementVNode"])("span",Y,"NT$ "+Object(a["toDisplayString"])(e.$filters.currency(w.cart.final_total)),1)]),Z])])])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ee,ae))])])}Object(a["popScopeId"])();c("99af");var oe=c("84af"),le={components:{Banner:oe["a"]},data:function(){return{publicPath:"/icamping/",title:"購物清單",imgUrl:"images/cart/cart-01.jpg",cart:{},coupon_code:"",isLoading:!1}},inject:["emitter"],methods:{getCarts:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("icamping","/cart");this.isLoading=!0,this.$http.get(c).then((function(c){t.isLoading=!1,t.cart=c.data.data,t.sendCart(),"update"===e&&t.emitter.emit("send-message",{success:!0,content:"更新購物車成功!"}),"delete"===e&&t.emitter.emit("send-message",{success:!0,content:"已從購物車中移除!"}),"addCoupon"===e&&t.emitter.emit("send-message",{success:!0,content:"套用優惠券!"})}))},increaseQty:function(e){e.qty++,this.updateCarts(e)},decreaseQty:function(e){e.qty--,this.updateCarts(e)},updateCarts:function(e){var t=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("icamping","/cart/").concat(e.id),a={product_id:e.product_id,qty:e.qty};this.$http.put(c,{data:a}).then((function(e){t.getCarts("update")}))},removeCartItem:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("icamping","/cart/").concat(e.id);this.$http.delete(c).then((function(e){t.getCarts("delete")}))},sendCart:function(){this.emitter.emit("sendCart",this.cart.carts)},addCouponCode:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("icamping","/coupon"),c={code:this.coupon_code};this.$http.post(t,{data:c}).then((function(t){console.log(t),t.data.status?e.getCarts("addCoupon"):e.emitter.emit("send-message",{success:!1,content:t.data.message})}))}},created:function(){this.getCarts()}};c("f132");le.render=ne,le.__scopeId="data-v-7bde633b";t["default"]=le},d532:function(e,t,c){},f132:function(e,t,c){"use strict";c("8b35")}}]);
//# sourceMappingURL=chunk-6842a9a5.d86e82cd.js.map