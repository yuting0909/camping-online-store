(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e50080d"],{"05ca":function(e,t,c){"use strict";c("a88b")},"202c":function(e,t,c){},"7d35":function(e,t,c){"use strict";c("202c")},a15b:function(e,t,c){"use strict";var n=c("23e7"),o=c("44ad"),i=c("fc6a"),l=c("a640"),r=[].join,a=o!=Object,d=l("join",",");n({target:"Array",proto:!0,forced:a||!d},{join:function(e){return r.call(i(this),void 0===e?",":e)}})},a434:function(e,t,c){"use strict";var n=c("23e7"),o=c("23cb"),i=c("a691"),l=c("50c4"),r=c("7b0b"),a=c("65f0"),d=c("8418"),s=c("1dde"),b=s("splice"),m=Math.max,u=Math.min,p=9007199254740991,j="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!b},{splice:function(e,t){var c,n,s,b,O,f,v=r(this),h=l(v.length),N=o(e,h),g=arguments.length;if(0===g?c=n=0:1===g?(c=0,n=h-N):(c=g-2,n=u(m(i(t),0),h-N)),h+c-n>p)throw TypeError(j);for(s=a(v,n),b=0;b<n;b++)O=N+b,O in v&&d(s,b,v[O]);if(s.length=n,c<n){for(b=N;b<h-n;b++)O=b+n,f=b+c,O in v?v[f]=v[O]:delete v[f];for(b=h;b>h-n+c;b--)delete v[b-1]}else if(c>n)for(b=h-n;b>N;b--)O=b+n-1,f=b+c-1,O in v?v[f]=v[O]:delete v[f];for(b=0;b<c;b++)v[b+N]=arguments[b+2];return v.length=h-n+c,s}})},a88b:function(e,t,c){},c740:function(e,t,c){"use strict";var n=c("23e7"),o=c("b727").findIndex,i=c("44d2"),l="findIndex",r=!0;l in[]&&Array(1)[l]((function(){r=!1})),n({target:"Array",proto:!0,forced:r},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i(l)},d2f1:function(e,t,c){"use strict";c.r(t);var n=c("7a23"),o=Object(n["createElementVNode"])("div",{class:"loadingio-spinner-spin-xmpavumjb"},[Object(n["createElementVNode"])("div",{class:"ldio-ylwm2fadiqf"},[Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div")]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div")]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div")]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div")]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div")]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div")]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div")]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div")])])],-1),i=["id"];function l(e,t,c,l,r,a){var d=Object(n["resolveComponent"])("Loading"),s=Object(n["resolveComponent"])("product-section-1"),b=Object(n["resolveComponent"])("product-section-2");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])(d,{active:r.isLoading},{default:Object(n["withCtx"])((function(){return[o]})),_:1},8,["active"]),Object(n["createElementVNode"])("main",{id:"product-introduction".concat(r.id),class:"product-intro pt-5 pt-md-0"},[r.product.city?(Object(n["openBlock"])(),Object(n["createBlock"])(s,{key:0,id:r.id,product:r.product,features:r.features},null,8,["id","product","features"])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(b,{product:r.product,types:r.types},null,8,["product","types"])],8,i)],64)}c("99af"),c("a15b"),c("4de4"),c("a4d3"),c("e01a");var r={class:"product-section-1"},a={class:"container py-4 border-bottom border-light border-2"},d={class:"row g-0 g-lg-3"},s={class:"col-lg-7 d-flex flex-column"},b={class:"position-relative mb-3"},m=["src"],u=["src"],p={class:"position-absolute w-100 top-50 start-50 translate-middle"},j=Object(n["createElementVNode"])("i",{class:"bi bi-chevron-left"},null,-1),O=[j],f=Object(n["createElementVNode"])("i",{class:"bi bi-chevron-right"},null,-1),v=[f],h={class:"mb-3 d-none d-md-block"},N=["src"],g=["onClick"],V=["src"],E={class:"col-lg-5"},y={class:"bg-light p-4 d-flex flex-column align-items-center h-100"},x={class:"fs-3 mb-3"},k={class:"flex-grow-1 d-flex flex-column text-muted px-lg-5"},w={class:"mb-2"},C=Object(n["createElementVNode"])("i",{class:"bi bi-geo-fill me-2"},null,-1),B={class:"mb-2"},T=Object(n["createElementVNode"])("i",{class:"bi bi-tags-fill me-2"},null,-1),S=Object(n["createElementVNode"])("p",{class:"mb-2"},[Object(n["createElementVNode"])("i",{class:"bi bi-chat-right-text-fill me-2"}),Object(n["createTextVNode"])("營區簡介 ")],-1),F={class:"mb-4 line-break lh-lg"},M={class:"row g-2 mt-auto mb-3"},D={class:"col-sm-6 d-grid"},I=Object(n["createElementVNode"])("span",null,"收藏營地",-1),L=[I],$=Object(n["createElementVNode"])("span",null,"取消收藏",-1),A=[$],P={class:"col-sm-6 d-grid"};function J(e,t,c,o,i,l){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",r,[Object(n["createElementVNode"])("div",a,[Object(n["createElementVNode"])("div",d,[Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("div",b,[Object(n["createVNode"])(n["TransitionGroup"],{tag:"div",name:"transition",class:"h-100"},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",{key:"0",class:Object(n["normalizeClass"])({"h-100":0===i.index})},[Object(n["withDirectives"])(Object(n["createElementVNode"])("img",{src:c.product.imageUrl,alt:"產品圖片",class:"main-picture"},null,8,m),[[n["vShow"],0===i.index]])],2),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(c.product.images,(function(e,t){return Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:Object(n["normalizeClass"])({"h-100":t+1===i.index}),key:t+1},[Object(n["createElementVNode"])("img",{src:e,alt:"產品圖片",class:"main-picture"},null,8,u)],2)),[[n["vShow"],t+1===i.index]])})),128))]})),_:1}),Object(n["createElementVNode"])("div",p,[Object(n["createElementVNode"])("button",{class:"btn btn-sm btn-pre fs-3",onClick:t[0]||(t[0]=function(e){return l.setIndex(i.index-1)})},O),Object(n["createElementVNode"])("button",{class:"btn btn-sm btn-next fs-3 float-end",onClick:t[1]||(t[1]=function(e){return l.setIndex(i.index+1)})},v)])]),Object(n["createElementVNode"])("div",h,[Object(n["createElementVNode"])("a",{href:"#",onClick:t[2]||(t[2]=Object(n["withModifiers"])((function(e){return l.setIndex(0)}),["prevent"]))},[Object(n["createElementVNode"])("img",{src:c.product.imageUrl,alt:"產品圖片",class:"picture me-2"},null,8,N)]),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(c.product.images,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("a",{href:"#",key:t,onClick:Object(n["withModifiers"])((function(e){return l.setIndex(t+1)}),["prevent"])},[Object(n["createElementVNode"])("img",{src:e,alt:"產品圖片",class:"picture me-2"},null,8,V)],8,g)})),128))])]),Object(n["createElementVNode"])("div",E,[Object(n["createElementVNode"])("div",y,[Object(n["createElementVNode"])("h1",x,Object(n["toDisplayString"])(c.product.title),1),Object(n["createElementVNode"])("div",k,[Object(n["createElementVNode"])("p",w,[C,Object(n["createTextVNode"])(Object(n["toDisplayString"])(c.product.address),1)]),Object(n["createElementVNode"])("p",B,[T,Object(n["createTextVNode"])(Object(n["toDisplayString"])(c.features),1)]),S,Object(n["createElementVNode"])("p",F,Object(n["toDisplayString"])(c.product.description),1),Object(n["createElementVNode"])("div",M,[Object(n["createElementVNode"])("div",D,[i.isFavorite?(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:1,class:"btn btn-warning rounded-pill btn-hover-white text-white",onClick:t[4]||(t[4]=function(e){return l.addToFavorite(c.id)})},A)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:0,class:"btn btn-outline-warning btn-hover-white rounded-pill",onClick:t[3]||(t[3]=function(e){return l.addToFavorite(c.id)})},L))]),Object(n["createElementVNode"])("div",P,[Object(n["createElementVNode"])("button",{class:"btn btn-outline-secondary btn-hover-white rounded-pill",onClick:t[5]||(t[5]=function(){return l.scrollToChooseType&&l.scrollToChooseType.apply(l,arguments)})}," 選擇營地 ")])])])])])])])])}c("c740"),c("a434");var _={data:function(){return{isFavorite:!1,index:0}},props:["id","product","features"],watch:{index:function(e,t){e>this.product.images.length?this.index=0:e<0&&(this.index=this.product.images.length)}},inject:["emitter"],methods:{defineIsFavorite:function(){var e=this,t=JSON.parse(localStorage.getItem("favoriteProducts"))||[];t.length&&(this.isFavorite=t.some((function(t){return t.id===e.product.id})))},addToFavorite:function(e){console.log(e),this.isFavorite=!this.isFavorite;var t=JSON.parse(localStorage.getItem("favoriteProducts"))||[];if(t.some((function(t){return t.id===e}))){var c=t.findIndex((function(t){return t.id===e}));t.splice(c,1)}else t.push(this.product);localStorage.setItem("favoriteProducts",JSON.stringify(t)),this.isFavorite?this.emitter.emit("send-message",{success:!0,content:"已加入收藏!"}):this.emitter.emit("send-message",{success:!1,content:"已從收藏中移除!"})},setIndex:function(e){this.index=e},scrollToChooseType:function(){this.emitter.emit("scrollToChooseType")}},created:function(){this.defineIsFavorite()}};c("05ca");_.render=J;var q=_,U={class:"product-section-2"},z=Object(n["createElementVNode"])("div",{class:"loadingio-spinner-spin-xmpavumjb"},[Object(n["createElementVNode"])("div",{class:"ldio-ylwm2fadiqf"},[Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div")]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div")]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div")]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div")]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div")]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div")]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div")]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div")])])],-1),G={class:"container py-5 px-4"},H={class:"row mb-5"},K=Object(n["createElementVNode"])("div",{class:"col-lg-2"},[Object(n["createElementVNode"])("h2",{class:"fs-4 fw-bold text-primary mb-3"},[Object(n["createElementVNode"])("i",{class:"bi bi-tree-fill text-success me-2"}),Object(n["createTextVNode"])("營區須知 ")])],-1),Q={class:"col-lg-10"},R={class:"line-break lh-lg"},W={class:"row mb-5",id:"choose-type"},X=Object(n["createElementVNode"])("div",{class:"col-lg-2"},[Object(n["createElementVNode"])("h2",{class:"fs-4 fw-bold text-primary mb-3"},[Object(n["createElementVNode"])("i",{class:"bi bi-tree-fill text-success me-2"}),Object(n["createTextVNode"])("選擇營地 ")])],-1),Y={class:"col-lg-10"},Z={class:"list-unstyled"},ee={class:"row g-0"},te={class:"col-md-5"},ce=["src"],ne={class:"col-md-7"},oe={class:"card-body h-100 d-flex flex-column"},ie={class:"fs-5 mb-0 d-flex justify-content-between flex-wrap"},le={class:"fw-bold mb-2"},re={class:"float-end fs-6 mb-2"},ae={class:"list-unstyled text-muted mb-3"},de=Object(n["createElementVNode"])("i",{class:"bi bi-check-lg me-2"},null,-1),se=["onClick"],be=Object(n["createElementVNode"])("i",{class:"bi bi-exclamation-circle me-2"},null,-1),me=Object(n["createTextVNode"])("查看更多說明"),ue=[be,me],pe={class:"row g-2 mt-auto"},je={class:"col-6 mb-2"},Oe=["onUpdate:modelValue"],fe={class:"col-6"},ve=["onClick"],he={class:"row mb-5"},Ne=Object(n["createElementVNode"])("div",{class:"col-lg-2"},[Object(n["createElementVNode"])("h2",{class:"fs-4 fw-bold text-primary mb-3"},[Object(n["createElementVNode"])("i",{class:"bi bi-tree-fill text-success me-2"}),Object(n["createTextVNode"])("注意事項 ")])],-1),ge={class:"col-lg-10"},Ve={class:"line-break lh-lg"};function Ee(e,t,c,o,i,l){var r=Object(n["resolveComponent"])("Loading"),a=Object(n["resolveComponent"])("content-modal");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",U,[Object(n["createVNode"])(r,{active:i.isLoading},{default:Object(n["withCtx"])((function(){return[z]})),_:1},8,["active"]),Object(n["createElementVNode"])("div",G,[Object(n["createElementVNode"])("div",H,[K,Object(n["createElementVNode"])("div",Q,[Object(n["createElementVNode"])("div",R,Object(n["toDisplayString"])(c.product.content),1)])]),Object(n["createElementVNode"])("div",W,[X,Object(n["createElementVNode"])("div",Y,[Object(n["createElementVNode"])("ul",Z,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(c.types,(function(t,c){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:c,class:"card rounded-3 overflow-hidden mb-3 border-0 bg-light"},[Object(n["createElementVNode"])("div",ee,[Object(n["createElementVNode"])("div",te,[Object(n["createElementVNode"])("img",{class:"type-pic",src:t.images[0],alt:"營地圖片"},null,8,ce)]),Object(n["createElementVNode"])("div",ne,[Object(n["createElementVNode"])("div",oe,[Object(n["createElementVNode"])("h3",ie,[Object(n["createElementVNode"])("span",le,Object(n["toDisplayString"])(t.title),1),Object(n["createElementVNode"])("span",re,"NT "+Object(n["toDisplayString"])(e.$filters.currency(t.price))+" / "+Object(n["toDisplayString"])(t.unit),1)]),Object(n["createElementVNode"])("ul",ae,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.$filters.stringToArray(t.content),(function(e,t){return Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:t},[de,Object(n["createTextVNode"])(Object(n["toDisplayString"])(e),1)],512)),[[n["vShow"],t<3]])})),128))]),e.$filters.stringToArray(t.content).length>3?(Object(n["openBlock"])(),Object(n["createElementBlock"])("a",{key:0,href:"#",class:"text-decoration-none text-secondary fs-7",onClick:Object(n["withModifiers"])((function(e){return l.openContentModal(t)}),["prevent"])},ue,8,se)):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(a,{ref:"contentModal",type:i.tempType},null,8,["type"]),Object(n["createElementVNode"])("div",pe,[Object(n["createElementVNode"])("div",je,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"number",min:"1",class:"form-control",placeholder:"請輸入數量","onUpdate:modelValue":function(e){return i.typeNum[t.id]=e}},null,8,Oe),[[n["vModelText"],i.typeNum[t.id]]])]),Object(n["createElementVNode"])("div",fe,[Object(n["createElementVNode"])("button",{class:"btn btn-primary w-100",onClick:function(e){return l.addToCart(t.id)}}," 預定營地 ",8,ve)])])])])])])})),128))])])]),Object(n["createElementVNode"])("div",he,[Ne,Object(n["createElementVNode"])("div",ge,[Object(n["createElementVNode"])("div",Ve,Object(n["toDisplayString"])(c.product.notice),1)])])])])}var ye={class:"modal fade",id:"contentModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},xe={class:"modal-dialog",role:"document"},ke={class:"modal-content"},we=Object(n["createElementVNode"])("div",{class:"modal-header bg-primary text-white"},[Object(n["createElementVNode"])("h5",{class:"mb-0"},"營地介紹")],-1),Ce={class:"modal-body"},Be=["src","alt"],Te={class:"fw-bold fs-5 mb-3"},Se={class:"list-unstyled text-muted mb-3"},Fe=Object(n["createElementVNode"])("i",{class:"bi bi-check-lg me-2"},null,-1);function Me(e,t,c,o,i,l){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ye,[Object(n["createElementVNode"])("div",xe,[Object(n["createElementVNode"])("div",ke,[we,Object(n["createElementVNode"])("div",Ce,[Object(n["createElementVNode"])("img",{src:c.type.images,alt:c.type.title,class:"img-fluid mb-3"},null,8,Be),Object(n["createElementVNode"])("h6",Te,Object(n["toDisplayString"])(c.type.title),1),Object(n["createElementVNode"])("ul",Se,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(i.content,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:t},[Fe,Object(n["createTextVNode"])(Object(n["toDisplayString"])(e),1)])})),128))])])])])],512)}var De=c("e0ae"),Ie={props:["type"],data:function(){return{content:[]}},watch:{type:function(){this.content=this.$filters.stringToArray(this.type.content)}},mixins:[De["a"]]};Ie.render=Me;var Le=Ie,$e={data:function(){return{typeNum:{},tempType:{},cart:[],isLoading:!1}},components:{ContentModal:Le},props:["product","types"],watch:{types:function(){this.typeNum=this.types.reduce((function(e,t){return e[t.id]="",e}),{})}},inject:["emitter"],methods:{addToCart:function(e){var t=this;if(0!==this.typeNum[e]){this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("icamping","/cart"),n={product_id:e,qty:this.typeNum[e]};this.$http.post(c,{data:n}).then((function(e){console.log(e),t.getCart(),t.isLoading=!1,t.emitter.emit("send-message",{success:!0,content:"成功加入購物車!"})}))}else this.emitter.emit("send-message",{success:!1,content:"請填寫正確數量!"})},getCart:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("icamping","/cart");this.$http.get(t).then((function(t){e.cart=t.data.data.carts,e.sendCart()}))},sendCart:function(){this.emitter.emit("sendCart",this.cart)},openContentModal:function(e){this.tempType=e,this.$refs.contentModal.showModal()}},mounted:function(){this.emitter.on("scrollToChooseType",(function(){document.querySelector("#choose-type").scrollIntoView(!1)}))}};c("7d35");$e.render=Ee;var Ae=$e,Pe=c("cfb9"),Je={components:{ProductSection1:q,ProductSection2:Ae},provide:function(){return{emitter:Pe["a"]}},data:function(){return{product:{},features:"",types:[],id:"",isLoading:!1}},methods:{getProduct:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("icamping","/product/").concat(this.id);this.isLoading=!0,this.$http.get(t).then((function(t){e.product=t.data.product,e.features=t.data.product.features.join("、"),e.getTypes(),e.isLoading=!1}))},getTypes:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("icamping","/products/all");this.$http.get(t).then((function(t){e.types=t.data.products.filter((function(t){return t.belong_to===e.product.title}))}))}},created:function(){this.id=this.$route.params.productId,this.getProduct()}};Je.render=l;t["default"]=Je},e01a:function(e,t,c){"use strict";var n=c("23e7"),o=c("83ab"),i=c("da84"),l=c("5135"),r=c("861d"),a=c("9bf2").f,d=c("e893"),s=i.Symbol;if(o&&"function"==typeof s&&(!("description"in s.prototype)||void 0!==s().description)){var b={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof m?new s(e):void 0===e?s():s(e);return""===e&&(b[t]=!0),t};d(m,s);var u=m.prototype=s.prototype;u.constructor=m;var p=u.toString,j="Symbol(test)"==String(s("test")),O=/^Symbol\((.*)\)[^)]+$/;a(u,"description",{configurable:!0,get:function(){var e=r(this)?this.valueOf():this,t=p.call(e);if(l(b,e))return"";var c=j?t.slice(7,-1):t.replace(O,"$1");return""===c?void 0:c}}),n({global:!0,forced:!0},{Symbol:m})}},e0ae:function(e,t,c){"use strict";var n=c("7c2b"),o=c.n(n);t["a"]={mounted:function(){this.modal=new o.a(this.$refs.modal)},methods:{showModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()}}}}}]);
//# sourceMappingURL=chunk-0e50080d.5e891497.js.map