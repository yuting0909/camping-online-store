(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-622e1550"],{"07ac":function(e,t,n){var c=n("23e7"),a=n("6f53").values;c({target:"Object",stat:!0},{values:function(e){return a(e)}})},1329:function(e,t,n){"use strict";n("d3b7"),n("99af");t["a"]={methods:{createPromise:function(e){var t=this;return new Promise((function(n,c){var a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("icamping","/admin/product");t.$http.post(a,{data:e}).then((function(e){n(e)})).catch((function(e){c(e)}))}))},updatePromise:function(e){var t=this;return new Promise((function(n,c){var a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("icamping","/admin/product/").concat(e.id);t.$http.put(a,{data:e}).then((function(e){n(e)})).catch((function(e){c(e)}))}))},deletePromise:function(e){var t=this;return new Promise((function(n,c){var a="".concat("https://vue3-course-api.hexschool.io/","api/").concat("icamping","/admin/product/").concat(e.id);t.$http.delete(a).then((function(e){n(e)})).catch((function(e){c(e)}))}))}}}},"159b":function(e,t,n){var c=n("da84"),a=n("fdbc"),o=n("17c2"),r=n("9112");for(var i in a){var l=c[i],s=l&&l.prototype;if(s&&s.forEach!==o)try{r(s,"forEach",o)}catch(d){s.forEach=o}}},1799:function(e,t,n){"use strict";var c=n("7a23"),a={"aria-label":"Page navigation example"},o={class:"pagination justify-content-center"},r=Object(c["createElementVNode"])("span",{"aria-hidden":"true"},"«",-1),i=[r],l=["onClick"],s=Object(c["createElementVNode"])("span",{"aria-hidden":"true"},"»",-1),d=[s];function u(e,t,n,r,s,u){return Object(c["openBlock"])(),Object(c["createElementBlock"])("nav",a,[Object(c["createElementVNode"])("ul",o,[Object(c["createElementVNode"])("li",{class:Object(c["normalizeClass"])(["page-item",{disabled:1===n.pages.current_page}])},[Object(c["createElementVNode"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=Object(c["withModifiers"])((function(t){return e.$emit("update-page",n.pages.current_page-1)}),["prevent"]))},i)],2),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(n.pages.total_pages,(function(t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{class:Object(c["normalizeClass"])(["page-item",{active:t===n.pages.current_page}]),key:t},[Object(c["createElementVNode"])("a",{class:"page-link",href:"#",onClick:Object(c["withModifiers"])((function(n){return e.$emit("update-page",t)}),["prevent"])},Object(c["toDisplayString"])(t),9,l)],2)})),128)),Object(c["createElementVNode"])("li",{class:Object(c["normalizeClass"])(["page-item",{disabled:n.pages.current_page===n.pages.total_pages}])},[Object(c["createElementVNode"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=Object(c["withModifiers"])((function(t){return e.$emit("update-page",n.pages.current_page+1)}),["prevent"]))},d)],2)])])}var b={props:["pages"]};b.render=u;t["a"]=b},"17c2":function(e,t,n){"use strict";var c=n("b727").forEach,a=n("a640"),o=a("forEach");e.exports=o?[].forEach:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}},5530:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("b64b"),n("a4d3"),n("4de4"),n("e439"),n("159b"),n("dbb4");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},"6f53":function(e,t,n){var c=n("83ab"),a=n("df75"),o=n("fc6a"),r=n("d1e7").f,i=function(e){return function(t){var n,i=o(t),l=a(i),s=l.length,d=0,u=[];while(s>d)n=l[d++],c&&!r.call(i,n)||u.push(e?[n,i[n]]:i[n]);return u}};e.exports={entries:i(!0),values:i(!1)}},a15b:function(e,t,n){"use strict";var c=n("23e7"),a=n("44ad"),o=n("fc6a"),r=n("a640"),i=[].join,l=a!=Object,s=r("join",",");c({target:"Array",proto:!0,forced:l||!s},{join:function(e){return i.call(o(this),void 0===e?",":e)}})},aa93:function(e,t,n){"use strict";n.r(t);n("a15b");var c=n("7a23"),a=Object(c["createElementVNode"])("div",{class:"loadingio-spinner-spin-xmpavumjb"},[Object(c["createElementVNode"])("div",{class:"ldio-ylwm2fadiqf"},[Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("div")]),Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("div")]),Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("div")]),Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("div")]),Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("div")]),Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("div")]),Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("div")]),Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("div")])])],-1),o={class:"text-end mt-4"},r=Object(c["createTextVNode"])("建立營區"),i={class:"table-responsive"},l={class:"table mt-4"},s=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",{width:"100"},"地區 / 縣市"),Object(c["createElementVNode"])("th",{width:"120"},"營區名稱"),Object(c["createElementVNode"])("th",{width:"200",class:"d-none d-sm-table-cell"},"營區特色"),Object(c["createElementVNode"])("th",{width:"120"},"是否啟用"),Object(c["createElementVNode"])("th",{width:"160"},"編輯")])],-1),d={key:0,class:"d-none d-sm-table-cell"},u={key:1},b={key:0,class:"text-success"},p={key:1,class:"text-muted"},m={class:"btn-group"},f=["onClick"],O=["onClick"];function j(e,t,n,j,h,g){var v=Object(c["resolveComponent"])("Loading"),E=Object(c["resolveComponent"])("router-link"),N=Object(c["resolveComponent"])("Pagination"),V=Object(c["resolveComponent"])("delete-modal");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(v,{active:h.isLoading},{default:Object(c["withCtx"])((function(){return[a]})),_:1},8,["active"]),Object(c["createElementVNode"])("div",o,[Object(c["createVNode"])(E,{to:"/admin/create-product",class:"btn btn-primary"},{default:Object(c["withCtx"])((function(){return[r]})),_:1})]),Object(c["createElementVNode"])("div",i,[Object(c["createElementVNode"])("table",l,[s,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(h.products,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:e.id},[Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.region)+" / "+Object(c["toDisplayString"])(e.city),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.title),1),e.features?(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",d,Object(c["toDisplayString"])(e.features.join("、")),1)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",u,"無")),Object(c["createElementVNode"])("td",null,[e.is_enabled?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",b,"啟用")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",p,"未啟用"))]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",m,[Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:function(t){return g.getProduct(e.id)}}," 編輯 ",8,f),Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return g.openDelModal(e)}}," 刪除 ",8,O)])])])})),128))])])]),Object(c["createVNode"])(N,{pages:h.pagination,onUpdatePage:g.getProducts},null,8,["pages","onUpdatePage"]),Object(c["createVNode"])(V,{item:h.temProduct,ref:"deleteModal",onDelItem:g.deleteProduct},null,8,["item","onDelItem"])],64)}var h=n("5530"),g=(n("99af"),n("4de4"),n("07ac"),n("fb6a"),n("d81d"),n("d3b7"),n("3ca3"),n("ddb0"),n("ec05")),v=n("1329"),E=n("1799"),N={data:function(){return{products:[],types:[],temProduct:{},temTypes:[],isLoading:!1,pagination:{current_page:1,offset:10,total_pages:0,page_start:0}}},inject:["pushMessageState"],components:{DeleteModal:g["a"],Pagination:E["a"]},created:function(){this.getProducts()},mixins:[v["a"]],methods:{getProducts:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("icamping","/admin/products/all");this.isLoading=!0,this.$http.get(n).then((function(n){n.data.success&&(e.products=Object.values(n.data.products).filter((function(e){return"露營區"===e.category})),e.types=Object.values(n.data.products).filter((function(e){return"營地種類"===e.category})),e.createPagination(t),e.isLoading=!1)}))},createPagination:function(e){this.pagination.current_page=e,this.pagination.page_start=(this.pagination.current_page-1)*this.pagination.offset,this.pagination.total_pages=Math.ceil(this.products.length/this.pagination.offset),this.products=this.products.slice(this.pagination.page_start,this.pagination.page_start+this.pagination.offset)},getProduct:function(e){this.$router.push("/admin/products/".concat(e))},openDelModal:function(e){this.temProduct=Object(h["a"])({},e),this.temTypes=this.types.filter((function(t){return t.belong_to===e.title})),this.$refs.deleteModal.showModal()},deleteProduct:function(){var e=this;this.$refs.deleteModal.hideModal(),this.isLoading=!0;var t=this.temTypes.map((function(t){return e.deletePromise(t)}));this.deletePromise(this.temProduct).then((function(n){return e.pushMessageState(n,"營區刪除"),Promise.all(t)})).then((function(t){return e.getProducts()}))}}};N.render=j;t["default"]=N},b64b:function(e,t,n){var c=n("23e7"),a=n("7b0b"),o=n("df75"),r=n("d039"),i=r((function(){o(1)}));c({target:"Object",stat:!0,forced:i},{keys:function(e){return o(a(e))}})},d81d:function(e,t,n){"use strict";var c=n("23e7"),a=n("b727").map,o=n("1dde"),r=o("map");c({target:"Array",proto:!0,forced:!r},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(e,t,n){var c=n("23e7"),a=n("83ab"),o=n("56ef"),r=n("fc6a"),i=n("06cf"),l=n("8418");c({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,n,c=r(e),a=i.f,s=o(c),d={},u=0;while(s.length>u)n=a(c,t=s[u++]),void 0!==n&&l(d,t,n);return d}})},e0ae:function(e,t,n){"use strict";var c=n("7c2b"),a=n.n(c);t["a"]={mounted:function(){this.modal=new a.a(this.$refs.modal)},methods:{showModal:function(){this.modal.show()},hideModal:function(){this.modal.hide()}}}},e439:function(e,t,n){var c=n("23e7"),a=n("d039"),o=n("fc6a"),r=n("06cf").f,i=n("83ab"),l=a((function(){r(1)})),s=!i||l;c({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(e,t){return r(o(e),t)}})},ec05:function(e,t,n){"use strict";var c=n("7a23"),a={class:"modal fade",id:"delModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},o={class:"modal-dialog",role:"document"},r={class:"modal-content border-0"},i={class:"modal-header bg-danger text-white"},l={class:"modal-title"},s=Object(c["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),d={class:"modal-body"},u=Object(c["createTextVNode"])(" 是否刪除 "),b={class:"text-danger"},p=Object(c["createTextVNode"])(" (刪除後將無法恢復)。 "),m={class:"modal-footer"},f=Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function O(e,t,n,O,j,h){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",a,[Object(c["createElementVNode"])("div",o,[Object(c["createElementVNode"])("div",r,[Object(c["createElementVNode"])("div",i,[Object(c["createElementVNode"])("h5",l,[Object(c["createElementVNode"])("span",null,"刪除 "+Object(c["toDisplayString"])(n.item.title),1)]),s]),Object(c["createElementVNode"])("div",d,[u,Object(c["createElementVNode"])("strong",b,Object(c["toDisplayString"])(n.item.title),1),p]),Object(c["createElementVNode"])("div",m,[f,Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=function(t){return e.$emit("del-item")})}," 確認刪除 ")])])])],512)}var j=n("e0ae"),h={props:{item:{}},data:function(){return{modal:{}}},mixins:[j["a"]]};h.render=O;t["a"]=h},fb6a:function(e,t,n){"use strict";var c=n("23e7"),a=n("861d"),o=n("e8b5"),r=n("23cb"),i=n("50c4"),l=n("fc6a"),s=n("8418"),d=n("b622"),u=n("1dde"),b=u("slice"),p=d("species"),m=[].slice,f=Math.max;c({target:"Array",proto:!0,forced:!b},{slice:function(e,t){var n,c,d,u=l(this),b=i(u.length),O=r(e,b),j=r(void 0===t?b:t,b);if(o(u)&&(n=u.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)?a(n)&&(n=n[p],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return m.call(u,O,j);for(c=new(void 0===n?Array:n)(f(j-O,0)),d=0;O<j;O++,d++)O in u&&s(c,d,u[O]);return c.length=d,c}})}}]);
//# sourceMappingURL=chunk-622e1550.807a8b99.js.map