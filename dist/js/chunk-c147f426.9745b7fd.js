(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c147f426"],{"09f8":function(e,t,c){},"3ce1":function(e,t,c){"use strict";c("09f8")},"6c2e":function(e,t,c){"use strict";c("71f4")},"71f4":function(e,t,c){},"84af":function(e,t,c){"use strict";var n=c("7a23"),o={class:"text-white ps-4 py-2 pe-1 lh-base s1-animate"};function a(e,t,c,a,l,r){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:"banner",style:Object(n["normalizeStyle"])({backgroundImage:"url(".concat(c.imgUrl,")")})},[Object(n["createElementVNode"])("h1",o,Object(n["toDisplayString"])(c.title),1)],4)}var l={props:["title","imgUrl"]};c("6c2e");l.render=a;t["a"]=l},b789:function(e,t,c){"use strict";c.r(t);var n=c("7a23"),o={id:"user-cart"};function a(e,t,c,a,l,r){var s=Object(n["resolveComponent"])("cart-section-1"),d=Object(n["resolveComponent"])("cart-section-2");return Object(n["openBlock"])(),Object(n["createElementBlock"])("main",o,[Object(n["createVNode"])(s),Object(n["createVNode"])(d)])}var l={class:"cart-section-1"};function r(e,t,c,o,a,r){var s=Object(n["resolveComponent"])("Banner");return Object(n["openBlock"])(),Object(n["createElementBlock"])("section",l,[Object(n["createVNode"])(s,{title:a.title,imgUrl:a.publicPath+a.imgUrl},null,8,["title","imgUrl"])])}var s=c("84af"),d={components:{Banner:s["a"]},data:function(){return{publicPath:"/icamping/dist/",title:"購物清單",imgUrl:"/images/cart/cart-01.jpg"}}};d.render=r;var i=d,b=Object(n["createElementVNode"])("div",{class:"loadingio-spinner-spin-xmpavumjb"},[Object(n["createElementVNode"])("div",{class:"ldio-ylwm2fadiqf"},[Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div")]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div")]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div")]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div")]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div")]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div")]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div")]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div")])])],-1),m={class:"cart-section-2"},u={key:0,class:"container py-5"},j={class:"table-responsive"},p={class:"table border-light"},O=Object(n["createElementVNode"])("thead",{class:"bg-info text-white"},[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",{width:"360",class:"ps-3 border-0"}," 商品名稱 "),Object(n["createElementVNode"])("th",{width:"180",class:"d-none d-sm-table-cell text-center border-0"}," 單價 "),Object(n["createElementVNode"])("th",{width:"200",class:"text-center border-0"},[Object(n["createTextVNode"])(" 數量 "),Object(n["createElementVNode"])("span",{class:"d-sm-none"}," & 金額")]),Object(n["createElementVNode"])("th",{width:"120",class:"text-center border-0 d-none d-sm-table-cell"}," 金額 "),Object(n["createElementVNode"])("th",{width:"120",class:"text-center border-0"},"刪除")])],-1),h={class:"border-light"},V={class:"row"},N={class:"col-lg-5 d-none d-lg-block"},g=["src"],v={class:"col-lg-7"},E=Object(n["createElementVNode"])("br",null,null,-1),f={class:"text-center align-middle border-light d-none d-sm-table-cell"},x={class:"text-center align-middle px-3 border-light"},y={class:"input-quantity d-flex justify-content-center border"},w=["onClick"],C=Object(n["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-dash text-muted",viewBox:"0 0 16 16"},[Object(n["createElementVNode"])("path",{d:"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"})],-1),k=[C],B=["onUpdate:modelValue"],$=["onClick"],S=Object(n["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-plus text-muted",viewBox:"0 0 16 16"},[Object(n["createElementVNode"])("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})],-1),D=[S],_={class:"d-block d-sm-none mt-2"},U={class:"text-center align-middle border-light d-none d-sm-table-cell"},q={class:"text-center align-middle border-light"},L=["onClick"],T=Object(n["createElementVNode"])("i",{class:"bi bi-trash"},null,-1),M=[T],Q={class:"d-sm-none"},z=Object(n["createElementVNode"])("td",{colspan:"2",class:"text-end"},"小計",-1),I={class:"text-end"},A={key:0,class:"d-sm-none"},F=Object(n["createElementVNode"])("td",{colspan:"2",class:"text-end text-success"},"折扣",-1),J={class:"text-end text-success"},P={class:"d-none d-sm-table-row"},G=Object(n["createElementVNode"])("td",{colspan:"4",class:"text-end"},"小計",-1),H={class:"text-end"},K={key:1,class:"d-none d-sm-table-row"},R=Object(n["createElementVNode"])("td",{colspan:"4",class:"text-end text-success"},"折扣",-1),W={class:"text-end text-success"},X={class:"row justify-content-end"},Y={class:"col-sm-8 col-lg-6"},Z={class:"input-group mb-3 input-group-sm"},ee={class:"input-group-append"},te={class:"mb-3 text-end"},ce=Object(n["createTextVNode"])(" 總金額： "),ne={class:"text-warning fs-5 fw-bold"},oe=Object(n["createStaticVNode"])('<div class="row"><div class="col-sm-5"><a href="#/products" class="w-100 mb-3 btn btn-outline-success rounded-0 px-3"><i class="bi bi-caret-left-fill"></i> 繼續購物 </a></div><div class="col-sm-2"></div><div class="col-sm-5"><a href="#/order" class="w-100 mb-3 btn btn-success text-white rounded-0 px-3">前往結帳 <i class="bi bi-caret-right-fill"></i></a></div></div>',1),ae={key:1,class:"container py-5"},le=Object(n["createElementVNode"])("h2",{class:"fw-bold mb-3"},"目前還沒有加入商品喔",-1),re=Object(n["createElementVNode"])("a",{href:"#/products",class:"btn btn-primary"},[Object(n["createTextVNode"])("尋找喜歡的露營區 "),Object(n["createElementVNode"])("i",{class:"bi bi-caret-right-fill"})],-1),se=[le,re];function de(e,t,c,o,a,l){var r=Object(n["resolveComponent"])("Loading");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])(r,{active:a.isLoading},{default:Object(n["withCtx"])((function(){return[b]})),_:1},8,["active"]),Object(n["createElementVNode"])("section",m,[a.cart.total?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",u,[Object(n["createElementVNode"])("div",j,[Object(n["createElementVNode"])("table",p,[O,Object(n["createElementVNode"])("tbody",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(a.cart.carts,(function(t,c){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:c},[Object(n["createElementVNode"])("td",h,[Object(n["createElementVNode"])("div",V,[Object(n["createElementVNode"])("div",N,[Object(n["createElementVNode"])("img",{class:"cart-img",src:t.product.images[0],alt:"產品圖片"},null,8,g)]),Object(n["createElementVNode"])("div",v,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.product.belong_to)+" ",1),E,Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(t.product.title),1)])])]),Object(n["createElementVNode"])("td",f," $ "+Object(n["toDisplayString"])(e.$filters.currency(t.product.price)),1),Object(n["createElementVNode"])("td",x,[Object(n["createElementVNode"])("div",y,[Object(n["createElementVNode"])("button",{class:"btn btn-sm rounded-0",onClick:function(e){return l.decreaseQty(t)}},k,8,w),Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{class:"w-50 text-center border-0 border-start border-end",type:"text","onUpdate:modelValue":function(e){return t.qty=e}},null,8,B),[[n["vModelText"],t.qty]]),Object(n["createElementVNode"])("button",{class:"btn btn-sm rounded-0",onClick:function(e){return l.increaseQty(t)}},D,8,$)]),Object(n["createElementVNode"])("span",_,"$ "+Object(n["toDisplayString"])(e.$filters.currency(t.total)),1)]),Object(n["createElementVNode"])("td",U," $ "+Object(n["toDisplayString"])(e.$filters.currency(t.total)),1),Object(n["createElementVNode"])("td",q,[Object(n["createElementVNode"])("button",{class:"btn btn-sm btn-outline-danger fs-5 btn-hover-white",onClick:function(e){return l.removeCartItem(t)}},M,8,L)])])})),128))]),Object(n["createElementVNode"])("tfoot",null,[Object(n["createElementVNode"])("tr",Q,[z,Object(n["createElementVNode"])("td",I,Object(n["toDisplayString"])(e.$filters.currency(a.cart.total)),1)]),a.cart.final_total!==a.cart.total?(Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",A,[F,Object(n["createElementVNode"])("td",J," - "+Object(n["toDisplayString"])(e.$filters.currency(a.cart.total-a.cart.final_total)),1)])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("tr",P,[G,Object(n["createElementVNode"])("td",H,Object(n["toDisplayString"])(e.$filters.currency(a.cart.total)),1)]),a.cart.final_total!==a.cart.total?(Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",K,[R,Object(n["createElementVNode"])("td",W," - "+Object(n["toDisplayString"])(e.$filters.currency(a.cart.total-a.cart.final_total)),1)])):Object(n["createCommentVNode"])("",!0)])])]),Object(n["createElementVNode"])("div",X,[Object(n["createElementVNode"])("div",Y,[Object(n["createElementVNode"])("div",Z,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text",class:"form-control rounded-0","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.coupon_code=e}),placeholder:"請輸入優惠碼"},null,512),[[n["vModelText"],a.coupon_code]]),Object(n["createElementVNode"])("div",ee,[Object(n["createElementVNode"])("button",{class:"btn btn-outline-info rounded-0",type:"button",onClick:t[1]||(t[1]=function(){return l.addCouponCode&&l.addCouponCode.apply(l,arguments)})}," 套用優惠碼 ")])]),Object(n["createElementVNode"])("div",te,[ce,Object(n["createElementVNode"])("span",ne,"NT$ "+Object(n["toDisplayString"])(e.$filters.currency(a.cart.final_total)),1)]),oe])])])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ae,se))])],64)}c("99af");var ie={data:function(){return{cart:{},coupon_code:"",isLoading:!1}},inject:["emitter"],methods:{getCarts:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("icamping","/cart");this.isLoading=!0,this.$http.get(c).then((function(c){t.isLoading=!1,t.cart=c.data.data,t.sendCart(),"update"===e&&t.emitter.emit("send-message",{success:!0,content:"更新購物車成功!"}),"delete"===e&&t.emitter.emit("send-message",{success:!0,content:"已從購物車中移除!"}),"addCoupon"===e&&t.emitter.emit("send-message",{success:!0,content:"套用優惠券!"})}))},increaseQty:function(e){e.qty++,this.updateCarts(e)},decreaseQty:function(e){e.qty--,this.updateCarts(e)},updateCarts:function(e){var t=this;console.log("update",e),this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("icamping","/cart/").concat(e.id),n={product_id:e.product_id,qty:e.qty};this.$http.put(c,{data:n}).then((function(e){console.log(e),t.getCarts("update")}))},removeCartItem:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("icamping","/cart/").concat(e.id);this.$http.delete(c).then((function(e){console.log(e),t.getCarts("delete")}))},sendCart:function(){this.emitter.emit("sendCart",this.cart.carts),console.log("sendCart")},addCouponCode:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("icamping","/coupon"),c={code:this.coupon_code};this.isLoading=!0,this.$http.post(t,{data:c}).then((function(t){e.getCarts("addCoupon"),console.log(t)}))}},created:function(){this.getCarts()}};c("3ce1");ie.render=de;var be=ie,me={components:{CartSection1:i,CartSection2:be}};me.render=a;t["default"]=me}}]);
//# sourceMappingURL=chunk-c147f426.9745b7fd.js.map